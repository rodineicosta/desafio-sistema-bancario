# üè¶ Sistema Banc√°rio em Python - Vers√£o 5 (DB API)

## üìñ Descri√ß√£o do Projeto

Este projeto √© parte do desafio **Banco de Dados**, da Forma√ß√£o **Santander 2025 - Back-End com Python**. A **Vers√£o 5** implementa o gerencimento de cadastro de clientes Pessoa F√≠sica e Pessoa Jur√≠dica atrav√©s de um banco de dados SQLIte, mantendo todas as funcionalidades da vers√£o anterior.

## ‚ö° Funcionalidades

### üîπ Opera√ß√µes Dispon√≠veis

- **[1] Depositar**: Permite realizar dep√≥sitos na conta
- **[2] Sacar**: Permite realizar saques com limita√ß√µes de seguran√ßa
- **[3] Visualizar Extrato**: Exibe hist√≥rico de transa√ß√µes e saldo atual
- **[4] Nova Conta**: Cria nova conta vinculada a um cliente
- **[5] Novo Cliente**: Cadastra novo cliente no sistema
- **[6] Listar Contas**: Exibe todas as contas cadastradas usando iterador personalizado
- **[7] Listar Clientes**: Exibe todos os clientes cadastrados
- **[8] Relat√≥rio de Transa√ß√µes**: Gera relat√≥rios filtrados usando geradores
- **[9] Sistema de Clientes (BD)**: Gera relat√≥rios filtrados usando geradores
- **[0] Sair**: Encerra o sistema

### üóÉÔ∏è Estrutura do Banco de Dados

#### Tabela: `pessoas_fisicas`

```sql
CREATE TABLE pessoas_fisicas (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    nome TEXT NOT NULL,
    cpf TEXT UNIQUE NOT NULL,
    data_nascimento TEXT NOT NULL,
    endereco TEXT NOT NULL,
    telefone TEXT,
    email TEXT,
    data_cadastro TEXT NOT NULL,
    ativo BOOLEAN DEFAULT 1
);
```

#### Tabela: `pessoas_juridicas`

```sql
CREATE TABLE pessoas_juridicas (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    razao_social TEXT NOT NULL,
    nome_fantasia TEXT,
    cnpj TEXT UNIQUE NOT NULL,
    endereco TEXT NOT NULL,
    telefone TEXT,
    email TEXT,
    representante_legal TEXT NOT NULL,
    data_cadastro TEXT NOT NULL,
    ativo BOOLEAN DEFAULT 1
);
```

### üöÄ Funcionalidades Avan√ßadas

### ‚úÖ **Valida√ß√£o de Documentos**

- **CPF**: Valida√ß√£o completa usando algoritmo oficial;
- **CNPJ**: Valida√ß√£o completa usando algoritmo oficial;
- **Formata√ß√£o autom√°tica**: XXX.XXX.XXX-XX e XX.XXX.XXX/XXXX-XX.

### üíæ **Opera√ß√µes CRUD**

- ‚úÖ **Create**: Inserir novos clientes (PF e PJ);
- ‚úÖ **Read**: Listar e buscar clientes;
- ‚úÖ **Update**: Preparado para futuras expans√µes;
- ‚úÖ **Delete**: Soft delete (marcar como inativo).

### üîç **Busca e Listagem**

- **Listar por tipo**: Pessoas f√≠sicas ou jur√≠dicas separadamente;
- **Listar todos**: Vis√£o consolidada de todos os clientes;
- **Busca por documento**: CPF ou CNPJ;
- **Ordena√ß√£o**: Alfab√©tica por nome/raz√£o social.

### üìä **Estat√≠sticas**

- **Contadores**: Total de PF, PJ e geral;
- **Relat√≥rios**: Informa√ß√µes do sistema.

## üîß Como Executar

### 1Ô∏è‚É£ Clone o reposit√≥rio

```bash
git clone https://github.com/rodineicosta/desafio-sistema-bancario.git
cd desafio-sistema-bancario
```

### 2Ô∏è‚É£ Execu√ß√£o Independente

```bash
python sistema_clientes.py
```

### 3Ô∏è‚É£ Integrado ao Sistema Banc√°rio

```bash
python desafio.py
# Escolher op√ß√£o [9] Sistema de Clientes (BD).
```

### 4Ô∏è‚É£ Executar Testes

```bash
python teste_database.py
```

## üìã Menu do Novo Sistema de Clientes (BD)

```
================ SISTEMA DE CLIENTES ================
[1]    Cadastrar Pessoa F√≠sica
[2]    Cadastrar Pessoa Jur√≠dica
[3]    Listar Pessoas F√≠sicas
[4]    Listar Pessoas Jur√≠dicas
[5]    Listar Todos os Clientes
[6]    Buscar Cliente por Documento
[7]    Estat√≠sticas do Sistema
[8]    Voltar ao Menu Principal
[0]    Sair
```

## üß™ Exemplos de Uso

### **Cadastro de Pessoa F√≠sica**

```
Nome completo: Jo√£o da Silva
CPF: 123.456.789-09
Data de nascimento: 15/03/1985
Endere√ßo: Rua das Flores, 123 - S√£o Paulo/SP
Telefone: (11) 99999-9999
E-mail: joao@email.com
```

### **Cadastro de Pessoa Jur√≠dica**

```
Raz√£o Social: Empresa ABC Ltda
Nome Fantasia: ABC Tech
CNPJ: 12.345.678/0001-95
Endere√ßo: Av. Paulista, 1000 - S√£o Paulo/SP
Representante Legal: Maria Santos
Telefone: (11) 3333-3333
E-mail: contato@abc.com
```

## üîí Valida√ß√µes Implementadas

### **CPF**

- ‚úÖ Formato num√©rico (11 d√≠gitos);
- ‚úÖ D√≠gitos verificadores corretos;
- ‚úÖ Rejei√ß√£o de sequ√™ncias repetidas;
- ‚úÖ Unicidade no banco de dados.

### **CNPJ**

- ‚úÖ Formato num√©rico (14 d√≠gitos);
- ‚úÖ D√≠gitos verificadores corretos;
- ‚úÖ Rejei√ß√£o de sequ√™ncias repetidas;
- ‚úÖ Unicidade no banco de dados.

### **Campos Obrigat√≥rios**

- **PF**: Nome, CPF, Data de Nascimento, Endere√ßo;
- **PJ**: Raz√£o Social, CNPJ, Endere√ßo, Representante Legal.

## üõ†Ô∏è Tecnologias Utilizadas

- **Python 3.8+**
- **SQLite3** (banco de dados);
- **Regex** (valida√ß√£o de entrada);
- **Pathlib** (manipula√ß√£o de caminhos);
- **Datetime** (timestamps);
- **Textwrap** (formata√ß√£o de sa√≠da).

## üìà Benef√≠cios

### **Para o Banco**

- ‚úÖ **Integridade de dados** garantida;
- ‚úÖ **Valida√ß√£o autom√°tica** de documentos;
- ‚úÖ **Hist√≥rico completo** de cadastros;
- ‚úÖ **Busca eficiente** por clientes;
- ‚úÖ **Relat√≥rios estat√≠sticos** instant√¢neos.

### **Para os Usu√°rios**

- ‚úÖ **Interface intuitiva** e organizada;
- ‚úÖ **Feedback claro** em todas as opera√ß√µes;
- ‚úÖ **Valida√ß√£o em tempo real**;
- ‚úÖ **Formata√ß√£o autom√°tica** de documentos;
- ‚úÖ **Navega√ß√£o simples** entre funcionalidades.

## üéØ Integra√ß√£o com Sistema Banc√°rio Existente

O sistema de clientes est√° **perfeitamente integrado** ao sistema banc√°rio principal:

1. **Acesso via menu principal** (op√ß√£o 9);
2. **Retorno autom√°tico** ao menu banc√°rio;
3. **Compartilhamento de dados** (preparado para futuras integra√ß√µes);
4. **Consist√™ncia visual** e de funcionalidades.

---

## üîÑ Evolu√ß√£o do Projeto

### v1.0 - Sistema B√°sico

- Fun√ß√µes simples;
- Opera√ß√µes b√°sicas;
- Uma √∫nica conta.

### v2.0 - Sistema com Fun√ß√µes

- Fun√ß√µes especializadas;
- M√∫ltiplos clientes e contas;
- Argumentos tipados (positional/keyword-only).

### v3.0 - Sistema POO

- Classes e objetos;
- Heran√ßa e polimorfismo;
- Classes abstratas;
- Encapsulamento.

### v4.0 - Sistema com Decoradores, Geradores e Iteradores

- Decorador de log;
- Gerador de relat√≥rio;
- Iterador personalizado.

### v4.1 - Limite Flex√≠vel de Transa√ß√µes e Manipula√ß√£o de Data e Hora

- Limite de 10 transa√ß√µes di√°rias;
- Implementado controle por data/hora;
- Centralizada valida√ß√£o no m√©todo `Cliente.realizar_transacao()`;
- Melhorado extrato com *timestamps* detalhados;
- Mantidas todas as funcionalidades v4.0 (decorators/generators/iterators).

### v4.2 - Registro de transa√ß√µes em arquivo de log

- Cria arquivo `log.txt`;
- Registra transa√ß√£o com data em formato UTC, nome da fun√ß√£o, argumentos e retorno;
- Mantidas todas as funcionalidades da v4.1.

### v4.3 - Gerenciamento de Pacotes, Conven√ß√µes e Boas Pr√°ticas Python

- Ordenamento correto das importa√ß√µes;
- Espa√ßamentos entre linhas;
- Limite m√°ximo de caracteres por linha;
- Mantidas todas as funcionalidades da v4.2.


### v5 - Banco de Dados

- Banco de dados SQLite criado com tabelas para PF e PJ;
- Inser√ß√£o de dados com valida√ß√£o completa;
- Listagem categorizada de clientes;
- Valida√ß√£o de CPF/CNPJ usando algoritmos oficiais;
- Interface intuitiva com feedback claro;
- Mantidas todas as funcionalidades da v4.3.

---

## üìö Conceitos Demonstrados

### Banco de Dados

- **Arquivo**: Cria√ß√£o de arquivo para armazenamento das informa√ß√µes;
- **Tabelas**: Cria√ß√£o de tabelas para cadastro de PF e PJ;
- **Valida√ß√£o**: Garantia de unicidade dos campos CPF e CNPJ, com valida√ß√£o;
- **Consultas**: Listagem de clientes por documento, por categoria e geral.

### Python Avan√ßado

- **Decorators**: `@log_transacao` com `@functools.wraps`;
- **Generators**: `yield` para efici√™ncia de mem√≥ria;
- **Iterators**: Protocolo `__iter__` e `__next__`;
- **Representa√ß√£o**: `__repr__` para definir a representa√ß√£o em string de um objeto;
- **Arquivos**: `pathlib`, `with`, `open()` e `write()` para manipula√ß√£o de arquivos;
- **Conven√ß√µes**: Utiliza√ß√µes de pacotes:
  - `flake8` para verifica√ß√µes;
  - `isort` para ordena√ß√£o de importa√ß√µes;
  - `black` para formata√ß√£o de c√≥digo.

### Data/Hora

- **datetime.now()**: *Timestamps* autom√°ticos;
- **datetime.now(UTC)**: *Timestamps* em formato *Coordinated Universal Time*;
- **strftime()**: Formata√ß√£o personalizada;
- **Compara√ß√£o de datas**: Filtragem por per√≠odo.

### POO

- **Heran√ßa**: Classes base abstratas;
- **Polimorfismo**: Transa√ß√µes especializadas;
- **Encapsulamento**: Dados protegidos.

---

## üéØ Objetivos Alcan√ßados

- ‚úÖ **Implementa√ß√£o completa** do desafio "Banco de Dados";
- ‚úÖ **Cria√ß√£o de arquivo** de de banco de dados para armazenamento de informa√ß√µes;
- ‚úÖ **Inclus√£o de registros** em tabelas separadas por categoria, com valida√ß√£o de dados;
- ‚úÖ **Recupera√ß√£o de informa√ß√µes** detalhadas por consultas ao banco de dados;
- ‚úÖ **C√≥digo testado** e documentado;
- ‚úÖ **Arquitetura escal√°vel** para futuras expans√µes.

---

## ü§ù Contribui√ß√£o

1. Fa√ßa um fork do projeto;
2. Crie uma branch para sua feature (`git checkout -b feature/AmazingFeature`);
3. Commit suas mudan√ßas (`git commit -m 'Add some AmazingFeature'`);
4. Push para a branch (`git push origin feature/AmazingFeature`);
5. Abra um Pull Request.

## üìÑ Licen√ßa

Este projeto est√° sob a licen√ßa MIT. Veja o arquivo [LICENSE](LICENSE) para mais detalhes.

## üë®‚Äçüíª Autor

**Rodinei Costa**

- DIO: [Rodinei Costa](https://www.dio.me/users/rodineicosta);
- GitHub: [@rodineicosta](https://github.com/rodineicosta);
- LinkedIn: [Rodinei Costa](https://linkedin.com/in/rodineicosta).

## üéì Reconhecimentos

- **DIO (Digital Innovation One)** - Plataforma de ensino;
- **Santander 2025** - Programa de forma√ß√£o;
- **Python Software Foundation** - Linguagem Python.

---

‚≠ê **Se este projeto foi √∫til para voc√™, considere dar uma estrela!** ‚≠ê

- ‚úÖ **Vincula√ß√£o obrigat√≥ria** conta-cliente;
- ‚úÖ **Limites de saque** rigorosamente controlados;
- ‚úÖ **Entrada flex√≠vel** com valida√ß√£o robusta.

## üîß Recursos Implementados na v4.3

Para acompanhar a evolu√ß√£o do desafio da vers√£o anterior, veja o arquivo [README v4.3](https://github.com/rodineicosta/desafio-sistema-bancario/blob/v4.3/boas-praticas/README.md) para mais detalhes.

---

### üöÄ Desenvolvido como parte do Desafio DIO + Santander 2025

Sistema Banc√°rio v5 (DB API) - Banco de Dados com Python
